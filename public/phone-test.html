<!DOCTYPE html>
<html>
<head>
  <title>Phone Input Test</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/intl-tel-input@23.0.4/build/css/intlTelInput.css">
</head>
<body>
  <h1>Phone Input Test</h1>
  <input type="tel" id="phone" style="width: 300px; padding: 10px;">
  <p id="status">Initializing...</p>

  <script src="https://cdn.jsdelivr.net/npm/intl-tel-input@23.0.4/build/js/intlTelInput.min.js"></script>
  <script>
    console.log('Script loaded');
    console.log('intlTelInput available:', typeof window.intlTelInput);

    function init() {
      const phoneInput = document.querySelector("#phone");
      const status = document.querySelector("#status");

      if (typeof window.intlTelInput === 'undefined') {
        status.textContent = 'Library not loaded, retrying...';
        setTimeout(init, 100);
        return;
      }

      try {
        const iti = window.intlTelInput(phoneInput, {
          initialCountry: "ca",
          preferredCountries: ["ca", "us"],
          separateDialCode: true,
          utilsScript: "https://cdn.jsdelivr.net/npm/intl-tel-input@23.0.4/build/js/utils.js"
        });

        status.textContent = 'Initialized successfully! You should see a country selector.';
        console.log('Initialized:', iti);
      } catch (e) {
        status.textContent = 'Error: ' + e.message;
        console.error(e);
      }
    }

    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', init);
    } else {
      init();
    }
  </script>
</body>
</html>
