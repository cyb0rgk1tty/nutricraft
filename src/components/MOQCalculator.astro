---
// MOQ Calculator Component
---

<div class="bg-white rounded-lg shadow-lg p-6 h-full flex flex-col">
  <h3 class="text-xl font-semibold mb-4">MOQ Calculator (Estimate)</h3>
  <form id="moq-calculator" class="space-y-4 flex-1 flex flex-col">
    <div>
      <label
        for="product-type"
        class="block text-sm font-medium text-gray-700 mb-1"
      >
        Product Type
      </label>
      <select
        id="product-type"
        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary"
      >
        <option value="capsules">Capsules & Tablets</option>
        <option value="powders">Powders</option>
        <option value="gummies">Gummies</option>
        <option value="liquids">Liquids</option>
        <option value="custom">Custom Formulation</option>
      </select>
    </div>

    <div>
      <label
        for="quantity"
        class="block text-sm font-medium text-gray-700 mb-1"
      >
        Desired Quantity
      </label>
      <input
        type="number"
        id="quantity"
        min="100"
        step="100"
        value="1000"
        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary"
      />
    </div>

    <div>
      <label
        for="packaging"
        class="block text-sm font-medium text-gray-700 mb-1"
      >
        Packaging Type
      </label>
      <select
        id="packaging"
        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary"
      >
        <option value="bottles">Bottles</option>
        <option value="pouches">Pouches</option>
        <option value="stick-packs">Stick Packs</option>
        <option value="bulk">Bulk</option>
      </select>
    </div>

    <div class="flex-1"></div>
    <button type="submit" class="btn-primary w-full mt-auto">
      Calculate MOQ
    </button>
  </form>

  <div id="moq-result" class="hidden mt-6 p-4 bg-mint-50 rounded-lg">
    <h4 class="font-semibold text-gray-900 mb-2">Estimated MOQ Details*:</h4>
    <div class="space-y-1 text-sm">
      <p>
        Minimum Order: <span id="min-order" class="font-semibold text-primary"
          >1000 units</span>
      </p>
      <p>
        Lead Time: <span id="lead-time" class="font-semibold">4-6 weeks</span>
      </p>
      <p>
        Estimated Cost: <span id="est-cost" class="font-semibold"
          >Contact for pricing</span>
      </p>
    </div>
    <p class="text-xs text-gray-600 mt-2">
      *Actual MOQs vary by manufacturer and product specifications
    </p>
  </div>
</div>

<script>
  const form = document.getElementById("moq-calculator");
  const result = document.getElementById("moq-result");
  const minOrderSpan = document.getElementById("min-order");
  const leadTimeSpan = document.getElementById("lead-time");

  form?.addEventListener("submit", (e) => {
    e.preventDefault();

    const productType = (
      document.getElementById("product-type") as HTMLSelectElement
    ).value;
    const quantity = parseInt(
      (document.getElementById("quantity") as HTMLInputElement).value,
    );

    // Simple MOQ logic
    let moq = 1000;
    let leadTime = "4-6 weeks";

    switch (productType) {
      case "gummies":
        moq = 1000;
        leadTime = "4-6 weeks";
        break;
      case "custom":
        moq = 2000;
        leadTime = "4-6 weeks";
        break;
      case "powders":
        if (quantity > 5000) {
          leadTime = "4-6 weeks";
        }
        break;
    }

    if (minOrderSpan)
      minOrderSpan.textContent = `${moq.toLocaleString()} units`;
    if (leadTimeSpan) leadTimeSpan.textContent = leadTime;

    result?.classList.remove("hidden");
  });
</script>
