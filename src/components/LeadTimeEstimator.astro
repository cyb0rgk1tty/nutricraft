---
// Lead Time Estimator Component
---

<div class="bg-white rounded-lg shadow-lg p-6 h-full flex flex-col">
  <h3 class="text-xl font-semibold mb-4">Lead Time Estimator (Estimate)</h3>
  <form id="lead-time-calculator" class="space-y-4 flex-1 flex flex-col">
    <div>
      <label for="order-type" class="block text-sm font-medium text-gray-700 mb-1">
        Order Type
      </label>
      <select 
        id="order-type" 
        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary"
      >
        <option value="first">First Production Run</option>
        <option value="repeat">Repeat Order</option>
        <option value="stock">Stock Formula</option>
        <option value="custom">Custom Formulation</option>
      </select>
    </div>
    
    <div>
      <label for="complexity" class="block text-sm font-medium text-gray-700 mb-1">
        Product Complexity
      </label>
      <select 
        id="complexity" 
        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary"
      >
        <option value="simple">Simple (Single ingredient)</option>
        <option value="moderate">Moderate (2-5 ingredients)</option>
        <option value="complex">Complex (6+ ingredients)</option>
      </select>
    </div>
    
    <div>
      <label for="rush" class="flex items-center space-x-2">
        <input 
          type="checkbox" 
          id="rush"
          class="w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary"
        />
        <span class="text-sm font-medium text-gray-700">Rush Production Needed</span>
      </label>
    </div>
    
    <div class="flex-1"></div>
    <button type="submit" class="btn-primary w-full mt-auto">
      Estimate Lead Time
    </button>
  </form>
  
  <div id="lead-time-result" class="hidden mt-6 p-4 bg-mint-50 rounded-lg">
    <h4 class="font-semibold text-gray-900 mb-2">Estimated Timeline*:</h4>
    <div class="space-y-2 text-sm">
      <div class="flex justify-between">
        <span>Formulation & Testing:</span>
        <span id="formulation-time" class="font-semibold">1-2 weeks</span>
      </div>
      <div class="flex justify-between">
        <span>Production:</span>
        <span id="production-time" class="font-semibold">4-6 weeks</span>
      </div>
      <div class="flex justify-between">
        <span>Quality Testing:</span>
        <span id="testing-time" class="font-semibold">1 week</span>
      </div>
      <div class="border-t pt-2 flex justify-between">
        <span class="font-semibold">Total Lead Time:</span>
        <span id="total-time" class="font-semibold text-primary">6-9 weeks</span>
      </div>
    </div>
    <p class="text-xs text-gray-600 mt-2">*Actual timelines vary by manufacturer and project requirements</p>
  </div>
</div>

<script>
  const leadForm = document.getElementById('lead-time-calculator');
  const leadResult = document.getElementById('lead-time-result');
  
  leadForm?.addEventListener('submit', (e) => {
    e.preventDefault();
    
    const orderType = (document.getElementById('order-type') as HTMLSelectElement).value;
    const complexity = (document.getElementById('complexity') as HTMLSelectElement).value;
    const isRush = (document.getElementById('rush') as HTMLInputElement).checked;
    
    let formulationTime = '1-2 weeks';
    let productionTime = '4-6 weeks';
    let testingTime = '1 week';
    let totalTime = '6-9 weeks';
    
    // Calculate based on order type and complexity
    if (orderType === 'repeat') {
      formulationTime = '0 weeks';
      productionTime = '3-5 weeks';
      totalTime = '4-6 weeks';
    } else if (orderType === 'stock') {
      formulationTime = '0 weeks';
      productionTime = '3-4 weeks';
      totalTime = '4-5 weeks';
    } else if (orderType === 'custom') {
      formulationTime = '2-3 weeks';
      productionTime = '5-7 weeks';
      totalTime = '8-11 weeks';
    }
    
    if (complexity === 'complex') {
      productionTime = '5-7 weeks';
      totalTime = '7-10 weeks';
    }
    
    if (isRush) {
      totalTime = totalTime.split('-')[0] + ' weeks (Rush)';
    }
    
    // Update display
    const formulationEl = document.getElementById('formulation-time');
    const productionEl = document.getElementById('production-time');
    const testingEl = document.getElementById('testing-time');
    const totalEl = document.getElementById('total-time');
    
    if (formulationEl) formulationEl.textContent = formulationTime;
    if (productionEl) productionEl.textContent = productionTime;
    if (testingEl) testingEl.textContent = testingTime;
    if (totalEl) totalEl.textContent = totalTime;
    
    leadResult?.classList.remove('hidden');
  });
</script>