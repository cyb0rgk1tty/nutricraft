---
// Cost Savings Calculator Component
---

<div class="bg-white rounded-lg shadow-lg p-6 h-full flex flex-col">
  <h3 class="text-xl font-semibold mb-4">Cost Savings Calculator</h3>
  <form id="cost-calculator" class="space-y-4 flex-1 flex flex-col">
    <div>
      <label for="current-cost" class="block text-sm font-medium text-gray-700 mb-1">
        Current Cost Per Unit ($)
      </label>
      <input 
        type="number" 
        id="current-cost" 
        min="0" 
        step="0.01"
        value="15"
        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary"
      />
    </div>
    
    <div>
      <label for="monthly-units" class="block text-sm font-medium text-gray-700 mb-1">
        Monthly Unit Volume
      </label>
      <input 
        type="number" 
        id="monthly-units" 
        min="100" 
        step="100"
        value="1000"
        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary"
      />
    </div>
    
    <div>
      <label for="service-type" class="block text-sm font-medium text-gray-700 mb-1">
        Service Type
      </label>
      <select 
        id="service-type" 
        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary"
      >
        <option value="private-label">Private Label Manufacturing</option>
        <option value="bulk">Bulk Manufacturing</option>
        <option value="full-service">Full Service (Manufacturing + Fulfillment)</option>
      </select>
    </div>
    
    <div class="flex-1"></div>
    <button type="submit" class="btn-primary w-full mt-auto">
      Calculate Savings
    </button>
  </form>
  
  <div id="cost-result" class="hidden mt-6 p-4 bg-mint-50 rounded-lg">
    <h4 class="font-semibold text-gray-900 mb-2">Your Potential Savings:</h4>
    <div class="space-y-2 text-sm">
      <div class="flex justify-between">
        <span>Current Monthly Cost:</span>
        <span id="current-monthly" class="font-semibold">$15,000</span>
      </div>
      <div class="flex justify-between">
        <span>Estimated Nutricraft Cost:</span>
        <span id="new-monthly" class="font-semibold text-primary">$10,500</span>
      </div>
      <div class="flex justify-between">
        <span>Monthly Savings:</span>
        <span id="monthly-savings" class="font-semibold text-green-600">$4,500</span>
      </div>
      <div class="border-t pt-2 flex justify-between">
        <span class="font-semibold">Annual Savings:</span>
        <span id="annual-savings" class="font-semibold text-primary text-lg">$54,000</span>
      </div>
    </div>
    <p class="mt-4 text-xs text-gray-500">
      *Estimates based on typical industry savings. Actual savings may vary.
    </p>
  </div>
</div>

<script>
  const costForm = document.getElementById('cost-calculator');
  const costResult = document.getElementById('cost-result');
  
  costForm?.addEventListener('submit', (e) => {
    e.preventDefault();
    
    const currentCost = parseFloat((document.getElementById('current-cost') as HTMLInputElement).value);
    const monthlyUnits = parseInt((document.getElementById('monthly-units') as HTMLInputElement).value);
    const serviceType = (document.getElementById('service-type') as HTMLSelectElement).value;
    
    // Calculate current monthly cost
    const currentMonthly = currentCost * monthlyUnits;
    
    // Calculate savings based on service type
    let savingsPercent = 0.25; // Default 25% savings
    
    switch(serviceType) {
      case 'private-label':
        savingsPercent = 0.30; // 30% savings
        break;
      case 'bulk':
        savingsPercent = 0.35; // 35% savings
        break;
      case 'full-service':
        savingsPercent = 0.25; // 25% savings
        break;
    }
    
    const newMonthly = currentMonthly * (1 - savingsPercent);
    const monthlySavings = currentMonthly - newMonthly;
    const annualSavings = monthlySavings * 12;
    
    // Update display
    const currentMonthlyEl = document.getElementById('current-monthly');
    const newMonthlyEl = document.getElementById('new-monthly');
    const monthlySavingsEl = document.getElementById('monthly-savings');
    const annualSavingsEl = document.getElementById('annual-savings');
    
    if (currentMonthlyEl) currentMonthlyEl.textContent = `$${currentMonthly.toLocaleString()}`;
    if (newMonthlyEl) newMonthlyEl.textContent = `$${Math.round(newMonthly).toLocaleString()}`;
    if (monthlySavingsEl) monthlySavingsEl.textContent = `$${Math.round(monthlySavings).toLocaleString()}`;
    if (annualSavingsEl) annualSavingsEl.textContent = `$${Math.round(annualSavings).toLocaleString()}`;
    
    costResult?.classList.remove('hidden');
  });
</script>