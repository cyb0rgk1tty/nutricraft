---
import BaseLayout from "../../../layouts/BaseLayout.astro";
import Header from "../../../components/Header.astro";
import Footer from "../../../components/Footer.astro";
import ScrollAnimation from "../../../components/ScrollAnimation.astro";
import SupplementFacts from "../../../components/SupplementFacts.astro";
import { brandedProducts, brandedCategories } from "../../../data/branded-products.js";

const { slug } = Astro.params;
const product = brandedProducts.find(p => p.slug === slug && p.categorySlug === 'electrolytes');
const category = brandedCategories.find(c => c.slug === 'electrolytes');

if (!product) {
  return Astro.redirect('/products/electrolytes');
}
---

<BaseLayout
  title={`${product.name} | White Label Electrolyte Drink Mix | Nutricraft Labs`}
  description={product.description}
>
  <Header />

  <!-- Hero -->
  <section class="bg-gradient-to-b from-mint-50 to-white py-16 md:py-24">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <ScrollAnimation animation="fade-up">
        <nav class="mb-6">
          <ol class="flex items-center space-x-2 text-sm text-dark-500">
            <li><a href="/products" class="hover:text-mint-600">Products</a></li>
            <li>/</li>
            <li><a href="/products/electrolytes" class="hover:text-mint-600">{category?.name}</a></li>
            <li>/</li>
            <li class="text-dark-900 font-medium">{product.name}</li>
          </ol>
        </nav>

        <div class="text-center max-w-3xl mx-auto">
          <h1 class="text-4xl md:text-5xl font-bold text-dark-900 mb-3">
            {product.name}
          </h1>
          {product.tag && (
            <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-semibold bg-mint-100 text-mint-800 mb-4">
              {product.tag}
            </span>
          )}
          <p class="text-xl text-dark-600 mb-8">
            {product.description}
          </p>
          <div class="flex flex-col sm:flex-row gap-4 justify-center">
            <a
              href="/contact"
              class="inline-flex items-center justify-center px-8 py-4 bg-mint-600 text-white font-semibold rounded-lg hover:bg-mint-700 transition-colors duration-300"
            >
              Request Samples
            </a>
            <button
              data-cal-link="Nutricraftlabs"
              data-cal-config='{"theme":"light"}'
              class="inline-flex items-center justify-center px-8 py-4 bg-white text-mint-600 font-semibold rounded-lg border-2 border-mint-600 hover:bg-mint-50 transition-colors duration-300"
            >
              Schedule Call
            </button>
          </div>
        </div>
      </ScrollAnimation>
    </div>
  </section>

  <!-- Flavors with Supplement Facts -->
  <section class="py-16 bg-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <ScrollAnimation animation="fade-up">
        <h2 class="text-3xl font-bold text-dark-900 mb-4 text-center">Available Flavors</h2>
        <p class="text-lg text-dark-600 text-center mb-12 max-w-2xl mx-auto">
          Each flavor features the same core electrolyte formula. Private label customers can customize flavors or create new profiles.
        </p>
      </ScrollAnimation>

      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
        {product.flavors.map((flavor, index) => (
          <ScrollAnimation animation="fade-up" delay={index * 150}>
            <div class="bg-gray-50 rounded-xl shadow-md overflow-hidden h-full flex flex-col">
              <div class="p-6 flex flex-col flex-grow">
                <!-- Flavor Name -->
                <div class="mb-4">
                  <span
                    class:list={[
                      "inline-flex items-center px-3 py-1 rounded-full text-sm font-bold text-white",
                      { "bg-mint-600": !flavor.color }
                    ]}
                    style={flavor.color ? `background-color: ${flavor.color}` : ""}
                  >
                    {flavor.name}
                  </span>
                </div>
                <!-- Supplement Facts Table -->
                <div class="flex justify-center mb-6">
                  <SupplementFacts
                    servingSize={flavor.servingSize}
                    servingWeight={flavor.servingWeight}
                    nutrition={flavor.nutrition}
                    supplementedWith={flavor.supplementedWith}
                    supplementalIngredients={flavor.supplementalIngredients}
                  />
                </div>

                <!-- Ingredients -->
                <div class="mt-auto">
                  <p class="text-sm font-bold text-dark-800 mb-1">Ingredients:</p>
                  <p class="text-xs text-dark-600 leading-relaxed">{flavor.ingredients}</p>
                </div>
              </div>
            </div>
          </ScrollAnimation>
        ))}
      </div>
    </div>
  </section>

  <!-- WL/PL Options -->
  <section class="py-16 bg-gray-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <ScrollAnimation animation="fade-up">
        <h2 class="text-3xl font-bold text-dark-900 mb-12 text-center">Packaging Options</h2>
        <div class="grid md:grid-cols-2 gap-12 max-w-4xl mx-auto">
          <div class="bg-white rounded-2xl p-8 shadow-lg">
            <h3 class="text-2xl font-semibold text-dark-900 mb-4">White Label</h3>
            <p class="text-dark-600">
              Use this exact formulation with your brand name, logo, and label design. Ready to go with minimal lead time.
            </p>
          </div>
          <div class="bg-white rounded-2xl p-8 shadow-lg">
            <h3 class="text-2xl font-semibold text-dark-900 mb-4">Private Label</h3>
            <p class="text-dark-600">
              Modify ingredients, adjust dosages, change flavors, or redesign the packaging. Make it fully your own.
            </p>
          </div>
        </div>
      </ScrollAnimation>
    </div>
  </section>

  <!-- CTA -->
  <section class="py-20 bg-gradient-to-b from-white to-mint-50">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <ScrollAnimation animation="fade-up">
        <h2 class="text-3xl md:text-4xl font-bold text-dark-900 mb-6">
          Interested in {product.name}?
        </h2>
        <p class="text-xl text-dark-600 mb-8">
          Get samples, a detailed spec sheet, and a custom quote for your brand.
        </p>
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <a
            href="/contact"
            class="inline-flex items-center justify-center px-8 py-4 bg-mint-600 text-white font-semibold rounded-lg hover:bg-mint-700 transition-colors duration-300"
          >
            Get Started
          </a>
          <button
            data-cal-link="Nutricraftlabs"
            data-cal-config='{"theme":"light"}'
            class="inline-flex items-center justify-center px-8 py-4 bg-white text-mint-600 font-semibold rounded-lg border-2 border-mint-600 hover:bg-mint-50 transition-colors duration-300"
          >
            Schedule Consultation
          </button>
        </div>
      </ScrollAnimation>
    </div>
  </section>

  <Footer />
</BaseLayout>
